<Window x:Class="MySleepHelperApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:MySleepHelperApp.Views"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        mc:Ignorable="d"
        Title="Sleep Helper" 
        Width="600"
        Height="450"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        Style="{StaticResource MainWindowStyle}">

    <Window.Resources>
        <!-- Подключаем словарь с иконками -->
        <ResourceDictionary Source="Styles/Icons.xaml"/>
    </Window.Resources>

    <Grid>
        <!-- Фон окна с градиентом -->
        <Border Background="{StaticResource WindowBackground}"/>

        <!-- Основной контейнер -->
        <DockPanel>
            <!-- 1. Верхняя панель с кнопками -->
            <Border DockPanel.Dock="Top"
                    Style="{StaticResource TopPanelStyle}"
                    MouseLeftButtonDown="TopPanel_MouseLeftButtonDown"
                    MouseMove="TopPanel_MouseMove"
                    MouseLeftButtonUp="TopPanel_MouseLeftButtonUp">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock Text="My Sleep Helper" 
                               Style="{StaticResource HeaderTextStyle}"
                               FontSize="16"
                               Margin="15,0"
                               VerticalAlignment="Center" 
                               HorizontalAlignment="Left"/>

                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                        <Button x:Name="trayButton"
                                Style="{StaticResource WindowControlButton}"
                                Content="↓" 
                                ToolTip="В трей"
                                Click="TrayCloseButton_Click"/>
                        <Button x:Name="MinimizeButton"
                                Style="{StaticResource WindowControlButton}"
                                Content="_" 
                                ToolTip="Свернуть"
                                Click="MinimizeButton_Click"/>
                        <Button x:Name="CloseButton"
                                Style="{StaticResource WindowControlButton}"
                                Content="✕" 
                                ToolTip="Закрыть"
                                Click="CloseButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- 2. Панель вкладок -->
            <Border DockPanel.Dock="Top" 
                    Style="{StaticResource TabsContainerStyle}">
                <UniformGrid Rows="1" HorizontalAlignment="Stretch">
                    <!-- Вкладка "Домой" -->
                    <RadioButton x:Name="HomeTab" 
                         Style="{StaticResource TabButtonStyle}" 
                         Content="Домой" 
                         GroupName="Tabs" 
                         IsChecked="True"
                         Tag="{StaticResource HomeIcon}"/>

                    <!-- Вкладка "Таймер" -->
                    <RadioButton x:Name="ShutdownTab" 
                         Style="{StaticResource TabButtonStyle}" 
                         Content="Таймер" 
                         GroupName="Tabs"
                         Tag="{StaticResource TimerIcon}"/>

                    <!-- Вкладка "Яркость" -->
                    <RadioButton x:Name="BrightnessTab" 
                         Style="{StaticResource TabButtonStyle}" 
                         Content="Яркость" 
                         GroupName="Tabs"
                         Tag="{StaticResource BrightnessIcon}"/>

                    <!-- Вкладка "Клавиатура" -->
                    <RadioButton x:Name="KeyboardTab" 
                         Style="{StaticResource TabButtonStyle}" 
                         Content="Клавиатура" 
                         GroupName="Tabs"
                         Tag="{StaticResource KeyboardIcon}"/>

                    <!-- Вкладка "Справка" -->
                    <RadioButton x:Name="HelpTab" 
                         Style="{StaticResource TabButtonStyle}" 
                         Content="Справка" 
                         GroupName="Tabs"
                         Tag="{StaticResource HelpIcon}"/>
                </UniformGrid>
            </Border>

            <!-- 3. Контент вкладок -->
            <ContentControl 
                x:Name="TabContent"
                HorizontalContentAlignment="Stretch"
                VerticalContentAlignment="Stretch"/>
        </DockPanel>

        <!-- Декоративная рамка -->
        <Border BorderBrush="{StaticResource BorderGradient}"
                BorderThickness="1"/>


        <tb:TaskbarIcon x:Name="MyNotifyIcon"
                        IconSource="pack://application:,,,/MySleepHelperApp;component/Styles/Assets/iconsleephelper.ico"
                        ToolTipText="Sleep Helper"
                        Visibility="Visible"
                        TrayMouseDoubleClick="MyNotifyIcon_TrayMouseDoubleClick">

            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Открыть" Name="MenuItem_Open" Click="MenuItem_Open_Click"/>
                    <MenuItem Header="Закрыть" Name="MenuItem_Exit" Click="MenuItem_Exit_Click"/>
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>

    </Grid>
</Window>